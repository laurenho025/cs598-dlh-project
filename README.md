# CS 598 DLH Project - Patient Phenotyping

albertc4, laurenh4

Group ID: 20

Paper ID: 116

Code re-used from the original paper author: https://github.com/sebastianGehrmann/phenotyping

## Data

Due to patient confidentiality requirements, we are not including the annotated dataset in this repository. The `data/annotations.csv` file is available in the original paper's code implementation [here](https://github.com/sebastianGehrmann/phenotyping). This file contains patient and hospital admission IDs, and the annotations done by the original paper authors. This file is missing the discharge summary text column, which can be obtained from MIMIC-III via physionet and should be saved as `data/NOTEEVENTS.csv`. To append the necessary column and get the full dataset, run the following command with python 3:

```
python add_discharge.py
```

## Running The Code

### Preprocessing

The word2vec results were provided by the original paper authors, and are included in the original paper's implementation [repository](https://github.com/sebastianGehrmann/phenotyping). This file should be saved to the root directory as `w2v.txt`. The preprocessed data files `data.h5` and `data-nobatch.h5` can be generated by running the following command with python 3:

```
python preprocess.py data/annotations.csv w2v.txt --batchsize=5
```

This will create `data.h5` and `data-nobatch.h5` in the root folder.

### Baseline Methods

Create a directory named `converted` in the root directory, if you have not run the baseline methods script previously. To run the baseline methods:

```
python basic_models.py --data data-nobatch.h5 --ngram 5
```

ngram value should be set to 1 to run bag of words logistic regression

### Convolutional Neural Net (CNN)

TODO: Update CNN instructions
